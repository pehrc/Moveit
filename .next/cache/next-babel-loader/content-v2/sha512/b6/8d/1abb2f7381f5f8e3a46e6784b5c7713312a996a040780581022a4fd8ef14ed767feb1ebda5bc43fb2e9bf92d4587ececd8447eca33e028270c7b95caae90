{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Correia-PC\\\\Documents\\\\Projects\\\\Moveit\\\\src\\\\contexts\\\\CountDownContex.tsx\";\nimport { createContext, useCallback, useContext, useEffect, useState } from \"react\";\nimport { ChallengesContext } from \"./ChallengesContext\";\nexport var CountdownContext = /*#__PURE__*/createContext({});\nvar countdownTimeout;\n\nvar _useContext = useContext(ChallengesContext),\n    startNewChallenge = _useContext.startNewChallenge;\n\nvar _useState = useState(0.1 * 60),\n    time = _useState[0],\n    setTime = _useState[1];\n\nvar _useState2 = useState(false),\n    isActive = _useState2[0],\n    setIsActive = _useState2[1];\n\nvar _useState3 = useState(false),\n    hasFinished = _useState3[0],\n    setHasFinished = _useState3[1];\n\nvar minutes = Math.floor(time / 60);\nvar seconds = time % 60;\nvar startCountdown = useCallback(function () {\n  setIsActive(true);\n}, []);\nvar resetCountdown = useCallback(function () {\n  clearTimeout(countdownTimeout);\n  setIsActive(false);\n  setTime(0.1 * 60);\n}, []);\nuseEffect(function () {\n  if (isActive && time > 0) {\n    countdownTimeout = setTimeout(function () {\n      setTime(time - 1);\n    }, 1000);\n  } else if (isActive && time === 0) {\n    setHasFinished(true);\n    setIsActive(false);\n    startNewChallenge();\n  }\n}, [isActive, time]);\nexport function CountdownProvider(_ref) {\n  var children = _ref.children;\n  return /*#__PURE__*/_jsxDEV(CountdownContext.Provider, {\n    value: {\n      minutes: minutes,\n      seconds: seconds,\n      hasFinished: hasFinished,\n      isActive: isActive,\n      startCountdown: startCountdown,\n      resetCountdown: resetCountdown\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n}\n_c = CountdownProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CountdownProvider\");","map":{"version":3,"sources":["C:/Users/Correia-PC/Documents/Projects/Moveit/src/contexts/CountDownContex.tsx"],"names":["createContext","useCallback","useContext","useEffect","useState","ChallengesContext","CountdownContext","countdownTimeout","startNewChallenge","time","setTime","isActive","setIsActive","hasFinished","setHasFinished","minutes","Math","floor","seconds","startCountdown","resetCountdown","clearTimeout","setTimeout","CountdownProvider","children"],"mappings":";;AAAA,SAASA,aAAT,EAAmCC,WAAnC,EAAgDC,UAAhD,EAA4DC,SAA5D,EAAuEC,QAAvE,QAAuF,OAAvF;AACA,SAASC,iBAAT,QAAkC,qBAAlC;AAeA,OAAO,IAAMC,gBAAgB,gBAAGN,aAAa,CAAC,EAAD,CAAtC;AAEP,IAAIO,gBAAJ;;kBAE+BL,UAAU,CAACG,iBAAD,C;IAAhCG,iB,eAAAA,iB;;gBAEkBJ,QAAQ,CAAC,MAAM,EAAP,C;IAA3BK,I;IAAOC,O;;iBACmBN,QAAQ,CAAC,KAAD,C;IAAlCO,Q;IAAUC,W;;iBACsBR,QAAQ,CAAC,KAAD,C;IAAxCS,W;IAAcC,c;;AAEtB,IAAMC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWR,IAAI,GAAG,EAAlB,CAAhB;AACA,IAAMS,OAAO,GAAGT,IAAI,GAAG,EAAvB;AAGA,IAAMU,cAAc,GAAGlB,WAAW,CAAC,YAAM;AACrCW,EAAAA,WAAW,CAAC,IAAD,CAAX;AACD,CAF+B,EAE9B,EAF8B,CAAlC;AAIE,IAAMQ,cAAc,GAAGnB,WAAW,CAAC,YAAM;AACvCoB,EAAAA,YAAY,CAACd,gBAAD,CAAZ;AACAK,EAAAA,WAAW,CAAC,KAAD,CAAX;AACAF,EAAAA,OAAO,CAAC,MAAM,EAAP,CAAP;AACD,CAJiC,EAIhC,EAJgC,CAAlC;AAMAP,SAAS,CAAC,YAAM;AACd,MAAGQ,QAAQ,IAAIF,IAAI,GAAG,CAAtB,EAAwB;AACtBF,IAAAA,gBAAgB,GAAGe,UAAU,CAAC,YAAM;AAClCZ,MAAAA,OAAO,CAACD,IAAI,GAAG,CAAR,CAAP;AACD,KAF4B,EAE1B,IAF0B,CAA7B;AAGD,GAJD,MAIO,IAAIE,QAAQ,IAAIF,IAAI,KAAK,CAAzB,EAA4B;AACjCK,IAAAA,cAAc,CAAC,IAAD,CAAd;AACAF,IAAAA,WAAW,CAAC,KAAD,CAAX;AACAJ,IAAAA,iBAAiB;AAClB;AACF,CAVQ,EAUP,CAACG,QAAD,EAAYF,IAAZ,CAVO,CAAT;AAaF,OAAO,SAASc,iBAAT,OAAsC;AAAA,MAAVC,QAAU,QAAVA,QAAU;AACzC,sBACI,QAAC,gBAAD,CAAkB,QAAlB;AAA2B,IAAA,KAAK,EAAE;AAACT,MAAAA,OAAO,EAAPA,OAAD;AAAUG,MAAAA,OAAO,EAAPA,OAAV;AAAmBL,MAAAA,WAAW,EAAXA,WAAnB;AAAgCF,MAAAA,QAAQ,EAARA,QAAhC;AAA0CQ,MAAAA,cAAc,EAAdA,cAA1C;AAA0DC,MAAAA,cAAc,EAAdA;AAA1D,KAAlC;AAAA,cACCI;AADD;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH;KANeD,iB","sourcesContent":["import { createContext, ReactNode, useCallback, useContext, useEffect, useState } from \"react\";\r\nimport { ChallengesContext } from \"./ChallengesContext\";\r\n\r\ninterface CountdownContextData {\r\n    minutes: number;\r\n    seconds: number;\r\n    hasFinished: boolean;\r\n    isActive: boolean;\r\n    startCountdown: () => void;\r\n    resetCountdown: () => void;\r\n}\r\n\r\ninterface CountdownProviderProps{\r\n    children: ReactNode;\r\n  }\r\n\r\nexport const CountdownContext = createContext({} as CountdownContextData )\r\n\r\nlet countdownTimeout: NodeJS.Timeout;\r\n\r\nconst  { startNewChallenge } = useContext(ChallengesContext);\r\n\r\nconst [ time , setTime ] = useState(0.1 * 60)\r\nconst [ isActive, setIsActive ] = useState(false)\r\nconst [ hasFinished , setHasFinished] = useState(false)\r\n\r\nconst minutes = Math.floor(time / 60)\r\nconst seconds = time % 60;\r\n\r\n\r\nconst startCountdown = useCallback(() => {\r\n    setIsActive(true)\r\n  },[])\r\n\r\n  const resetCountdown = useCallback(() => {\r\n    clearTimeout(countdownTimeout)\r\n    setIsActive(false)\r\n    setTime(0.1 * 60)\r\n  },[])\r\n\r\n  useEffect(() => {\r\n    if(isActive && time > 0){\r\n      countdownTimeout = setTimeout(() => {\r\n        setTime(time - 1);\r\n      }, 1000)\r\n    } else if (isActive && time === 0) {\r\n      setHasFinished(true);\r\n      setIsActive(false);\r\n      startNewChallenge();\r\n    }\r\n  },[isActive , time])\r\n\r\n\r\nexport function CountdownProvider({children}){\r\n    return(\r\n        <CountdownContext.Provider value={{minutes, seconds, hasFinished, isActive, startCountdown, resetCountdown}}>\r\n        {children}\r\n        </CountdownContext.Provider>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}